<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ch√∫c m·ª´ng 20/10 üíñ</title>
  <style>
    :root{
      --pink:#ff3b8d; --rose:#ff6aa2; --magenta:#ea3a8b;
      --bg1:#fde7f1; --bg2:#fff0f7; --text:#b31364;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;}
    body{
      overflow:hidden; color:var(--text);
      background:
        radial-gradient(1200px 800px at 10% -10%, #fff6fb 0%, transparent 60%),
        radial-gradient(900px 600px at 110% 10%, #ffeef7 0%, transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    /* Bokeh */
    .bokeh{
      position:fixed; inset:0; pointer-events:none; overflow:hidden;
      filter: blur(8px) saturate(110%);
    }
    .bokeh span{
      position:absolute; width:140px; height:140px; border-radius:50%;
      background: radial-gradient(#ffffffaa, #ffffff20 60%, transparent 70%);
      animation: float var(--dur) linear infinite;
      left: var(--x);
      top: var(--y);
    }
    @keyframes float{
      from{ transform: translateY(20vh) scale(var(--s)); opacity:.6;}
      to{ transform: translateY(-120vh) scale(var(--s)); opacity:0;}
    }

    /* Khung trung t√¢m */
    .stage{
      position:relative; height:100%; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:28px; text-align:center;
    }

    /* Tr√°i tim SVG */
    .heartWrap{opacity:0; transform:scale(.7); animation: heartIn 2.8s ease forwards .2s; filter: drop-shadow(0 10px 30px #ff5aa84d);}
    @keyframes heartIn{
      0%{opacity:0; transform:scale(.4)}
      60%{opacity:1; transform:scale(1.12)}
      100%{opacity:1; transform:scale(1)}
    }
    .heart{
      width:min(38vmin,240px);
      aspect-ratio:1/1;
      fill:url(#g);
      animation:pulse 2.2s ease-in-out infinite 3.2s;
    }
    @keyframes pulse{
      0%,100%{transform:scale(1)}
      50%{transform:scale(1.06)}
    }

    /* Ch·ªØ cu·ªëi */
    .title{
      font-weight:700; letter-spacing:.5px; font-size:min(6.2vmin,36px);
      opacity:0; transform:translateY(12px);
      animation: showText .9s ease-out forwards 4.2s, type 3.2s steps(30,end) 4.2s forwards;
      white-space:nowrap; overflow:hidden; border-right: 2px solid transparent;
    }
    @keyframes showText{to{opacity:1; transform:translateY(0)}}
    @keyframes type{ from{width:0} to{width:100%} }

    .subtitle{opacity:0; font-size:14px; letter-spacing:.3px}
    .subtitle.show{animation:fade .9s ease-out forwards 6.8s}
    @keyframes fade{to{opacity:.9}}

    /* Canvas hoa r∆°i */
    canvas#petals{position:fixed; inset:0; pointer-events:none;}

    /* N√∫t b·∫≠t nh·∫°c */
    .gate{
      position:fixed; inset:0; display:grid; place-items:center; background:linear-gradient(135deg,#ffffffcc,#fff6fbcc); backdrop-filter: blur(6px);
      transition:opacity .5s ease; z-index:20;
    }
    .gate.hide{opacity:0; visibility:hidden}
    .btn{
      background: linear-gradient(135deg, var(--pink), var(--magenta));
      color:white; border:none; padding:14px 22px; border-radius:999px; font-weight:700; cursor:pointer;
      box-shadow: 0 10px 30px #ff7ab94d; transform:translateY(0); transition: transform .15s ease, box-shadow .2s ease;
    }
    .btn:hover{transform:translateY(-2px); box-shadow:0 14px 34px #ff7ab966}
    .btn:active{transform:translateY(0)}
    .hint{margin-top:10px; color:#9b3a6f; font-size:12px}
  </style>
</head>
<body>
  <!-- L·ªõp bokeh lung linh -->
  <div class="bokeh" aria-hidden="true"></div>

  <!-- C√°nh hoa r∆°i -->
  <canvas id="petals"></canvas>

  <!-- N·ªôi dung trung t√¢m -->
  <div class="stage" aria-live="polite">
    <div class="heartWrap">
      <svg class="heart" viewBox="0 0 100 100" aria-label="TraÃÅi tim">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#ff7ab9"/>
            <stop offset="50%" stop-color="#ff4fa2"/>
            <stop offset="100%" stop-color="#ff2d8c"/>
          </linearGradient>
        </defs>
        <path d="M50 86 C20 62 6 46 6 29 a19 19 0 0 1 36 -5 a1 1 0 0 0 16 0 a19 19 0 0 1 36 5 c0 17 -14 33 -44 57z"/>
      </svg>
    </div>
    <div class="title">üíê Ch√∫c m·ª´ng Ng√†y Ph·ª• N·ªØ Vi·ªát Nam 20/10 üíê</div>
    <div class="subtitle">T·ª´ Thi√™n H∆∞∆°ng Ph√°t & Emy ‚Äì k√≠nh g·ª≠i l·ªùi y√™u th∆∞∆°ng!</div>
  </div>

  <!-- N√∫t m·ªü nh·∫°c -->
  <div class="gate" id="gate">
    <div style="text-align:center">
      <button class="btn" id="start">B·∫≠t nh·∫°c & xem hi·ªáu ·ª©ng</button>
      <div class="hint">Nh·∫•n ƒë·ªÉ ph√°t nh·∫°c (ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông tr√™n ƒëi·ªán tho·∫°i)</div>
    </div>
  </div>

  <!-- Nh·∫°c n·ªÅn: thay b·∫±ng file trong repo c·ªßa b·∫°n, v√≠ d·ª• music.mp3 -->
  <audio id="bgm" src="music.mp3" loop preload="auto"></audio>

  <script>
    // --------- B·∫≠t nh·∫°c & reveal ----------
    const btn = document.getElementById('start');
    const gate = document.getElementById('gate');
    const bgm = document.getElementById('bgm');
    const subtitle = document.querySelector('.subtitle');

    btn.addEventListener('click', async () => {
      try {
        bgm.volume = 0; // fade-in
        await bgm.play();
        gate.classList.add('hide');
        subtitle.classList.add('show');
        let v = 0;
        const fade = setInterval(() => { v += 0.02; bgm.volume = Math.min(v, 0.6); if (v>=0.6) clearInterval(fade); }, 80);
      } catch(e){
        alert('Tr√¨nh duy·ªát ch·∫∑n t·ª± ph√°t nh·∫°c. H√£y th·ª≠ nh·∫•n l·∫°i nh√©!');
      }
    });

    // --------- Bokeh t·∫°o s·∫µn ----------
    (function makeBokeh(){
      const holder = document.querySelector('.bokeh');
      for (let i=0;i<14;i++){
        const s = document.createElement('span');
        s.style.setProperty('--x', Math.random()*100+'%');
        s.style.setProperty('--y', Math.random()*100+'%');
        s.style.setProperty('--dur', (8+Math.random()*10)+'s');
        s.style.setProperty('--s', (0.5+Math.random()*1.4).toFixed(2));
        holder.appendChild(s);
      }
    })();

    // --------- C√°nh hoa r∆°i b·∫±ng canvas ----------
    const canvas = document.getElementById('petals');
    const ctx = canvas.getContext('2d');
    let W, H, petals=[];
    function resize(){
      W = canvas.width = innerWidth;
      H = canvas.height = innerHeight;
    }
    addEventListener('resize', resize); resize();

    function Petal(){
      this.x = Math.random()*W;
      this.y = -20 - Math.random()*H;
      this.r = 6 + Math.random()*10;
      this.speed = 0.8 + Math.random()*1.2;
      this.swing = Math.random()*2 + 1;
      this.angle = Math.random()*Math.PI*2;
      this.omega = (Math.random()*0.02 + 0.01) * (Math.random()<.5?-1:1);
      this.color = ['#ff9ec4','#ff7ab9','#ffd1e4'][Math.floor(Math.random()*3)];
    }
    Petal.prototype.update = function(){
      this.y += this.speed;
      this.angle += this.omega;
      this.x += Math.sin(this.angle)*this.swing;
      if (this.y - this.r > H || this.x < -50 || this.x > W+50) {
        // reset
        Petal.call(this);
        this.y = -20;
      }
    }
    Petal.prototype.draw = function(){
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.angle*0.6);
      // c√°nh hoa ki·ªÉu ‚Äúdrop‚Äù
      ctx.fillStyle = this.color;
      ctx.beginPath();
      ctx.moveTo(0, -this.r);
      ctx.quadraticCurveTo(this.r, -this.r, this.r*0.8, 0);
      ctx.quadraticCurveTo(this.r*0.2, this.r*0.9, 0, this.r*1.2);
      ctx.quadraticCurveTo(-this.r*0.2, this.r*0.9, -this.r*0.8, 0);
      ctx.quadraticCurveTo(-this.r, -this.r, 0, -this.r);
      ctx.closePath();
      ctx.fill();
      ctx.restore();
    }

    for (let i=0;i<80;i++) petals.push(new Petal());
    function loop(){
      ctx.clearRect(0,0,W,H);
      petals.forEach(p=>{p.update(); p.draw()});
      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
